# Education\_PR\_2025

**Консольное приложение на C# для демонстрации работы алгоритмов RSA и Диффи-Хеллмана**

## Оглавление

* [Описание](#описание)
* [Требования](#требования)
* [Установка и сборка](#установка-и-сборка)
* [Запуск и использование](#запуск-и-использование)
* [Структура проекта](#структура-проекта)
* [Описание компонентов](#описание-компонентов)

  * [Program.cs](#programcs)
  * [UserInterface](#userinterface)
  * [RSA.cs](#rsa.cs)
  * [DiffieHellmanProtocol.cs](#diffiehellmanprotocolcs)
  * [ErrorInfo.cs](#errorinfocs)
  * [App.config](#appconfig)
* [Алгоритмические детали](#алгоритмические-детали)

  * [RSA](#rsa)
  * [Диффи-Хеллман](#диффи-хеллман)
* [Соображения по безопасности](#соображения-по-безопасности)
* [Расширяемость](#расширяемость)
* [Автор](#автор)
* [Лицензия](#лицензия)

## Описание

Данный проект представляет собой консольное приложение, разработанное на языке C#, демонстрирующее основные принципы работы двух ключевых криптографических механизмов:

* **RSA (Rivest–Shamir–Adleman)** — схема асимметричного шифрования и цифровой подписи.
* **Протокол Диффи-Хеллмана** — протокол установления общего секретного ключа по незащищённому каналу.

Приложение позволяет вводить параметры (простые числа, открытые экспоненты, основы), генерировать ключи, шифровать/расшифровывать сообщения и вычислять общий секрет.

## Требования

* **.NET 6.0+** или **.NET Framework 4.7.2+**
* **Visual Studio 2019/2022** (или VS Code + .NET SDK)
* **Git** для клонирования репозитория

## Установка и сборка

```bash
git clone https://github.com/Zyared/Education_PR_2025.git
cd Education_PR_2025
dotnet build
```

## Запуск и использование

```bash
dotnet run --project Education_PR_2025.csproj
```

При запуске появится главное меню:

1. **RSA** — перейти в режим генерации ключей, шифрования/расшифровки.
2. **Diffie-Hellman** — перейти в режим обмена ключами.
3. **Выход** — завершение работы приложения.

Следуйте подсказкам на экране для ввода параметров (p, q, e для RSA; p, g, a, b для Диффи-Хеллмана).

## Структура проекта

```
Education_PR_2025/
│
├─ .vs/                   # Настройки Visual Studio
├─ bin/, obj/             # Папки сборки
├─ App.config             # Конфигурация приложения
├─ Education_PR_2025.sln  # Решение Visual Studio
├─ Education_PR_2025.csproj
├─ Program.cs             # Точка входа
├─ UserInterface.cs       # Взаимодействие с пользователем
├─ RSA.cs                 # Реализация алгоритма RSA
├─ DiffieHellmanProtocol.cs # Реализация протокола Диффи-Хеллмана
├─ ErrorInfo.cs           # Обработка ошибок и retry-логика
└─ README.md              # Этот файл
```

## Описание компонентов

### Program.cs

Точка входа `Main()`, создаёт экземпляр `UserInterface` и запускает основной цикл через метод `Run()`. Отвечает за инициализацию.

### UserInterface

Управляет состояниями приложения (state machine):

* Отображает главное меню.
* Обрабатывает ввод пользователя.
* Переключает режимы: RSA, Диффи-Хеллман, выход.
* Перехватывает исключения и передаёт управление `ErrorInfo`.

### RSA.cs

Содержит класс `RSAAlgorithm` с методами:

* `GenerateKeys(int bitLength)` — генерация простых чисел `p`, `q`, вычисление `n`, `φ(n)`, подбор открытой экспоненты `e` и закрытой `d` (расширенный алгоритм Евклида).
* `Encrypt(BigInteger message, BigInteger e, BigInteger n)` — возведение `message^e mod n` методом быстрого возведения в степень с логарифмической сложностью.
* `Decrypt(BigInteger cipher, BigInteger d, BigInteger n)` — обратная операция `cipher^d mod n`.

Внутренние детали:

* Используется `System.Numerics.BigInteger` для работы с произвольной точностью.
* Проверка взаимной простоты `gcd(e, φ(n)) == 1` через алгоритм Евклида.
* Быстрое возведение в степень (`ModPow`).

### DiffieHellmanProtocol.cs

Класс `DiffieHellmanProtocol`:

* `GenerateParameters(int bitLength)` — выбор большого простого `p` и первообразного корня `g`.
* `GeneratePrivateKey(int bitLength)` — случайное `a`.
* `ComputePublicKey(BigInteger a, BigInteger p, BigInteger g)` — `A = g^a mod p`.
* `ComputeSharedSecret(BigInteger A, BigInteger b, BigInteger p)` — `s = A^b mod p`.

Реализовано через `BigInteger.ModPow` и проверку ключей.

### ErrorInfo.cs

Обрабатывает ошибки ввода:

* Отлавливает `FormatException`, `OverflowException`.
* Выводит читаемые сообщения.
* Пауза `Thread.Sleep()` для ожидания перед повторным вводом.
* Возврат в предыдущее состояние.

### App.config

Конфигурационный файл, может содержать параметры по умолчанию.

## Алгоритмические детали

### RSA

1. Выбрать два случайных простых `p` и `q`.
2. Вычислить `n = p * q` и `φ(n) = (p-1)*(q-1)`.
3. Подобрать `e` такое, что `1 < e < φ(n)` и `gcd(e, φ(n)) = 1`.
4. Найти `d` — мультикористическое обратное `e` по модулю `φ(n)` (расширенный алгоритм Евклида).
5. Открытый ключ `(e, n)`, закрытый `(d, n)`.
6. Шифрование: `c = m^e mod n`.
7. Расшифровка: `m = c^d mod n`.

### Диффи-Хеллман

1. Генерируются общее простое `p` и первообразный корень `g`.
2. Сторона A выбирает случайное `a`, сторона B — `b`.
3. A вычисляет `A = g^a mod p`; B — `B = g^b mod p` и обмениваются.
4. Общий секрет у A: `s = B^a mod p`; у B: `s = A^b mod p`.
5. `s` идентичен у обеих сторон, используется для симметричной криптографии.

## Соображения по безопасности

* Предназначено только для обучения, не использовать в продакшн.
* Могут отсутствовать проверки на генерацию безопасных простых и первообразных корней.
* Не реализованы механизмы защиты от атак на случайные числа.

## Расширяемость

* Добавить проверку простоты и первообразности.
* Реализовать дополнительные алгоритмы (ECC, ElGamal).
* Внедрить GUI.
* Добавить сохранение/загрузку ключей.

## Автор

Zyared (Группа ИБ-124, преподаватель Чураев А.А.)

## Лицензия

Без лицензии. Использование на свой риск.
